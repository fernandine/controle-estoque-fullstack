<form
  *ngIf="!isLoggedIn"
  name="form"
  (ngSubmit)="f.form.valid && onSubmit()"
  #f="ngForm"
  novalidate
>
  <!--INPUT USERNAME-->
  <label for="username" class="block text-900 text-xl font-medium mb-2"
    >Username</label
  >
  <input
    pInputText
    style="padding: 1rem"
    class="w-full md:w-30rem mb-5"
    name="username"
    [(ngModel)]="form.username"
    required
    #username="ngModel"
    [ngClass]="{ 'is-invalid': f.submitted && username.errors }"
  />
  <div *ngIf="username.errors && f.submitted" class="invalid-feedback">
    Username is required!
  </div>
  <!--INPUT PASSWORD-->
  <label for="password" class="block text-900 font-medium text-xl mb-2"
    >Password</label
  >
  <p-password
    inputId="password"
    name="password"
    placeholder="Password"
    [toggleMask]="true"
    styleClass="mb-5"
    inputStyleClass="w-full p-3 md:w-30rem"
    [(ngModel)]="form.password"
    required
    #password="ngModel"
    [ngClass]="{ 'is-invalid': f.submitted && password.errors }"
  ></p-password>

  <div *ngIf="password.errors && f.submitted" class="invalid-feedback">
    <div *ngIf="password.errors['required']">Password is required</div>
    <div *ngIf="password.errors['minlength']">
      Password must be at least 6 characters
    </div>
  </div>

  <button
    pButton
    pRipple
    label="Sign In"
    routerLink="/home"
    class="w-full p-3 text-xl"
  ></button>

  <div
    *ngIf="f.submitted && isLoginFailed"
    class="alert alert-danger"
    role="alert"
  >
    Login failed: {{ errorMessage }}
  </div>
</form>
<p-message
  *ngIf="isLoggedIn"
  severity="success"
  text="Logged in as {{ roles }}"
></p-message>
